"Epic","Story","Task","Scope","AcceptanceCriteria","Estimate","Dependencies","OwnerRole"
"R0 – Hardening","CI & Environments","Lock env parity","Audit env variable usage across fitcrew-focus, align .env.example and release-checklist.md with runtime requirements","AC1: pnpm typecheck passes using documented env vars; AC2: release-checklist.md lists every required secret","4","None","Tech Lead"
"R0 – Hardening","CI & Environments","Stabilize baseline pipelines","Repair pnpm typecheck && lint && test && build in CI and ensure scripts/smoke/smoke-api.ts passes on staging","AC1: CI pipeline green for main merge; AC2: smoke:api run exits 0 with audited log","6","Lock env parity","FS Engineer A"
"R0 – Hardening","Observability Foundations","Instrument critical APIs","Add OpenTelemetry traces to /api/posts, /api/notifications, /api/membership and propagate x-trace-id headers","AC1: Traces visible in Supabase Logflare; AC2: Logs include correlation id for each request","5","Stabilize baseline pipelines","Tech Lead"
"R0 – Hardening","Observability Foundations","Stand up SLO dashboard","Create uptime/perf dashboard covering p95 TTFB, error rate, Stripe webhook success and SSE disconnect metrics","AC1: Dashboard accessible to team; AC2: Alert route configured for SLO breaches","4","Instrument critical APIs","Data Analyst"
"R1 – GA Core","Auth & Account Safety","Build auth UI flows","Implement /login, /register, /forgot-password pages with client validation hooking existing /api/auth endpoints","AC1: New user can register and login via UI; AC2: Password reset flow succeeds end-to-end","8","Stabilize baseline pipelines","FS Engineer A"
"R1 – GA Core","Auth & Account Safety","Email verification & rate limits","Add /api/auth/verify and /api/auth/resend endpoints, store verification tokens, add rate limiting + hCaptcha","AC1: Unverified user blocked from /feed until verify; AC2: Rate limit returns 429 after threshold and logs security event","6","Build auth UI flows","Tech Lead"
"R1 – GA Core","Real-time Notifications","Implement SSE stream","Create /api/notifications/stream using Redis pub/sub with heartbeats and update NotificationProvider to consume EventSource","AC1: SSE emits events for like/comment/treat; AC2: Client auto-reconnects within 5s after simulated drop","7","Email verification & rate limits","FS Engineer B"
"R1 – GA Core","Real-time Notifications","Offline push & service worker","Ship service worker in public/sw.js, manage push subscriptions, and surface opt-in controls","AC1: Offline device receives push for new notification; AC2: Unsubscribe removes endpoint from backend store","5","Implement SSE stream","FS Engineer C"
"R1 – GA Core","Feed Reliability","Moderation & resilience","Add abuse filters, retry logic, and fallback guards for /api/posts, /api/posts/[id]/comments, and AI comment retries","AC1: Flagged post hidden within 60s and noted in PostReport; AC2: Upstream failure surfaces friendly error without blank feed","6","Build auth UI flows","FS Engineer B"
"R1 – GA Core","Feed Reliability","Regression test suite","Expand Vitest and browser smoke tests to hit 70% coverage and nightly run covering feed/notifications/treats","AC1: Coverage report ≥70%; AC2: Nightly regression workflow passes twice consecutively","6","Moderation & resilience","QA"
"R2 – Monetization & Growth","Stripe Subscription","Checkout & portal integration","Create subscription plans, /api/membership/checkout and /premium paywall with Stripe customer portal entry","AC1: Checkout session returns active subscription row; AC2: Non-subscribers redirected to /premium with upsell copy","8","Implement SSE stream","FS Engineer A"
"R2 – Monetization & Growth","Stripe Subscription","Webhook processor","Persist Stripe webhook events, update Subscription/Invoice models, handle retries and alerts","AC1: Payment succeeded webhook sets subscriptionStatus=active; AC2: Failure triggers alert and automatic retry","6","Checkout & portal integration","Tech Lead"
"R2 – Monetization & Growth","Referral Analytics","Dashboard enhancements","Create Supabase materialized view and UI charts for referral acceptance, waitlist opt-ins, cohort trends","AC1: Dashboard updates within 5 min of referral event; AC2: Pending vs accepted counts match database audit","5","Webhook processor","Data Analyst"
"R2 – Monetization & Growth","Referral Analytics","Email templates rollout","Publish Resend templates for verification, reset, winback, and cancellation journeys","AC1: Templates render with localisation tokens in staging; AC2: Cancel event triggers winback message automatically","4","Checkout & portal integration","PM"
"R3 – Integrations & Meal Plan","Meal Plan MVP","Prisma models & API","Add MealPlan, MealEntry models, migrations, and /api/meal-plans CRUD with validation","AC1: prisma migrate deploy succeeds in staging; AC2: GET /api/meal-plans returns plan with entries for authenticated user","7","Webhook processor","FS Engineer B"
"R3 – Integrations & Meal Plan","Meal Plan MVP","UI & insights wiring","Create /meal-plans route, surface daily macros, integrate with insights and treat recommendations","AC1: Meal plan UI displays macro targets vs actuals; AC2: Insights blends meal plan data into progress charts","6","Prisma models & API","FS Engineer C"
"R3 – Integrations & Meal Plan","Health Integrations","Apple HealthKit ingestion","Implement OAuth/device link, schedule cron to ingest HealthKit weight/steps via webhook bridge","AC1: User links HealthKit and sample data stored in Measurement; AC2: Retry handles 429 from Apple API","6","Prisma models & API","FS Engineer D"
"R3 – Integrations & Meal Plan","Health Integrations","Google Fit + anomaly detection","Sync Google Fit data, normalise units, and trigger anomaly alerts feeding notifications SSE","AC1: Google Fit import populates Measurement rows with correct units; AC2: Anomaly triggers notification and coach note","6","Apple HealthKit ingestion","Data Analyst"
